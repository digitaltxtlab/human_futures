{
    "collab_server" : "",
    "contents" : "rm(list = ls())\nsetwd(\"/home/kln/projects/human_futures/code/R\")\nload(\"/home/kln/projects/human_futures/data/hf_corpus.RData\")\nlibrary(proxy)\n\n\n# length normalization\nnorm_eucl <- function(m) m/apply(m, MARGIN=1, FUN=function(x) sum(x^2)^.5)\nfeature.n.mat <- norm_eucl(feature.mat)\nrownames(feature.n.mat) <- metafeature[,4]\n# k number of groups\nk <- as.integer(readline(prompt = \"Enter number of clusters: \"))\nfeature.cl <- kmeans(feature.n.mat, k)\n# classification\n# export metadata with grouping\nexport_df <- data.frame(metafeature, distance_group = matrix(feature.cl$cluster)) \nexport_df <- export_df[order(export_df$distance_group),]# order export df on specific column\nwrite.csv(export_df, file = paste('kmeans_class_',k,'.csv', sep = ''),row.names=TRUE)\n# plot\nx <- prcomp(feature.n.mat)$x[,1];\ny <- prcomp(feature.n.mat)$x[,2];\nnames <- metafeature[,1]# change for other metadata\ncols = as.double(feature.cl$cluster)\n# save figure\njpeg(paste('kmeans_class_',k,'.jpg', sep = ''))\nplot(x, y, type='p', pch=20, col=cols, cex = 2,xlab='Comp.1', ylab='Comp.2')\ntext(x, y, names, col=cols, cex=.8, pos=4)\nlegend(.4,.4,unique(feature.cl$cluster),col=1:length(feature.cl$cluster),pch=1)\ndev.off()\n",
    "created" : 1480243988240.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3790556294",
    "id" : "C79A17FF",
    "lastKnownWriteTime" : 1480245579,
    "last_content_update" : 1480245579096,
    "path" : "~/projects/human_futures/code/R/hard_group.R",
    "project_path" : "hard_group.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}